{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\visao\\\\OneDrive\\\\Desktop\\\\SWP_FE\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\visao\\\\OneDrive\\\\Desktop\\\\SWP_FE\\\\src\\\\Home\\\\header.js\";\nimport React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport GoogleLogin from 'react-google-login';\nimport './LoginBar.css';\nexport default function LoginBar() {\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    email = _useState2[0],\n    setEmail = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    password = _useState4[0],\n    setPassword = _useState4[1];\n  var _useState5 = useState(''),\n    _useState6 = _slicedToArray(_useState5, 2),\n    errorMessage = _useState6[0],\n    setErrorMessage = _useState6[1];\n  var _useState7 = useState(false),\n    _useState8 = _slicedToArray(_useState7, 2),\n    isLoggedIn = _useState8[0],\n    setIsLoggedIn = _useState8[1];\n  var _useState9 = useState(null),\n    _useState10 = _slicedToArray(_useState9, 2),\n    user = _useState10[0],\n    setUser = _useState10[1]; // Thêm state user để lưu thông tin người dùng\n  var handleEmailChange = function handleEmailChange(e) {\n    setEmail(e.target.value);\n  };\n  var handlePasswordChange = function handlePasswordChange(e) {\n    setPassword(e.target.value);\n  };\n  var handleLogout = function handleLogout() {\n    setIsLoggedIn(false);\n    setUser(null); // Xóa thông tin người dùng khi đăng xuất\n  };\n\n  var handleSubmit = function handleSubmit(e) {\n    e.preventDefault();\n    var data = {\n      email: email,\n      password: password\n    };\n    axios.post('https://dencelclinic.onrender.com/api/auth/login', data).then(function (response) {\n      console.log(response.data);\n      setIsLoggedIn(true);\n      setUser(response.data); // Lưu thông tin người dùng vào state user\n      alert(\"Ch\\xE0o m\\u1EEBng \".concat(response.data.fullname, \"!\")); // Hiển thị thông báo chào mừng\n    }).catch(function (error) {\n      if (error.response) {\n        setErrorMessage(error.response.data.message);\n      } else {\n        setErrorMessage('An error occurred. Please try again later.');\n      }\n    });\n  };\n  var handleGoogleLoginSuccess = function handleGoogleLoginSuccess(response) {\n    console.log(response);\n  };\n  var handleGoogleLoginFailure = function handleGoogleLoginFailure(error) {\n    console.log(error);\n  };\n  if (isLoggedIn) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }\n    }, \"Xin ch\\xE0o, \", user.fullname, \"!\"), /*#__PURE__*/React.createElement(\"img\", {\n      src: user.avatar,\n      alt: \"Avatar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/profile\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 15\n      }\n    }, \"Xem th\\xF4ng tin c\\xE1 nh\\xE2n\")), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/edit-profile\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 15\n      }\n    }, \"Ch\\u1EC9nh s\\u1EEDa th\\xF4ng tin\")), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/medical-records\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 15\n      }\n    }, \"Xem h\\u1ED3 s\\u01A1 b\\u1EC7nh\")), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/change-password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 15\n      }\n    }, \"\\u0110\\u1ED5i m\\u1EADt kh\\u1EA9u\")), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/logout\",\n      onClick: handleLogout,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 15\n      }\n    }, \"\\u0110\\u0103ng xu\\u1EA5t\")))));\n  } else {\n    return /*#__PURE__*/React.createElement(\"form\", {\n      className: \"login-form\",\n      onSubmit: handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 7\n      }\n    });\n  }\n}","map":{"version":3,"names":["React","useState","Link","axios","GoogleLogin","LoginBar","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","password","setPassword","_useState5","_useState6","errorMessage","setErrorMessage","_useState7","_useState8","isLoggedIn","setIsLoggedIn","_useState9","_useState10","user","setUser","handleEmailChange","e","target","value","handlePasswordChange","handleLogout","handleSubmit","preventDefault","data","post","then","response","console","log","alert","concat","fullname","catch","error","message","handleGoogleLoginSuccess","handleGoogleLoginFailure","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","src","avatar","alt","to","onClick","className","onSubmit"],"sources":["C:/Users/visao/OneDrive/Desktop/SWP_FE/src/Home/header.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport GoogleLogin from 'react-google-login';\r\nimport './LoginBar.css';\r\n\r\nexport default function LoginBar() {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n  const [user, setUser] = useState(null); // Thêm state user để lưu thông tin người dùng\r\n\r\n  const handleEmailChange = (e) => {\r\n    setEmail(e.target.value);\r\n  };\r\n\r\n  const handlePasswordChange = (e) => {\r\n    setPassword(e.target.value);\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    setIsLoggedIn(false);\r\n    setUser(null); // Xóa thông tin người dùng khi đăng xuất\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    const data = {\r\n      email: email,\r\n      password: password\r\n    };\r\n\r\n    axios\r\n      .post('https://dencelclinic.onrender.com/api/auth/login', data)\r\n      .then((response) => {\r\n        console.log(response.data);\r\n        setIsLoggedIn(true);\r\n        setUser(response.data); // Lưu thông tin người dùng vào state user\r\n        alert(`Chào mừng ${response.data.fullname}!`); // Hiển thị thông báo chào mừng\r\n      })\r\n      .catch((error) => {\r\n        if (error.response) {\r\n          setErrorMessage(error.response.data.message);\r\n        } else {\r\n          setErrorMessage('An error occurred. Please try again later.');\r\n        }\r\n      });\r\n  };\r\n\r\n  const handleGoogleLoginSuccess = (response) => {\r\n    console.log(response);\r\n  };\r\n\r\n  const handleGoogleLoginFailure = (error) => {\r\n    console.log(error);\r\n  };\r\n\r\n  if (isLoggedIn) {\r\n    return (\r\n      <div>\r\n        <div>Xin chào, {user.fullname}!</div>\r\n        {/* Hiển thị avatar */}\r\n        <img src={user.avatar} alt=\"Avatar\" />\r\n\r\n        <div>\r\n          {/* Hiển thị các tùy chọn */}\r\n          <ul>\r\n            <li>\r\n              <Link to=\"/profile\">Xem thông tin cá nhân</Link>\r\n            </li>\r\n            <li>\r\n              <Link to=\"/edit-profile\">Chỉnh sửa thông tin</Link>\r\n            </li>\r\n            <li>\r\n              <Link to=\"/medical-records\">Xem hồ sơ bệnh</Link>\r\n            </li>\r\n            <li>\r\n              <Link to=\"/change-password\">Đổi mật khẩu</Link>\r\n            </li>\r\n            <li>\r\n              <Link to=\"/logout\" onClick={handleLogout}>\r\n                Đăng xuất\r\n              </Link>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    );\r\n  } else {\r\n    return (\r\n      <form className=\"login-form\" onSubmit={handleSubmit}>\r\n        {/* Các phần code khác giữ nguyên */}\r\n      </form>\r\n    );\r\n  }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}